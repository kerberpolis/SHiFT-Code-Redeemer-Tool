<h2>User Games</h2>

<div class="user-games-container">
    <div class='user-game-item'>
        <table matSort id="user-games-table" mat-table [dataSource]="userGames" class="mat-elevation-z8 base-table">
            <ng-container matColumnDef="game">
                <th mat-header-cell *matHeaderCellDef> Game </th>
                <td mat-cell *matCellDef="let userGame">{{userGame.game}} </td>
            </ng-container>
    
            <ng-container matColumnDef="platform">
                <th mat-header-cell *matHeaderCellDef> Platform </th>
                <td mat-cell *matCellDef="let userGame"> {{userGame.platform}} </td>
            </ng-container>
    
            <ng-container matColumnDef="_id">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let userGame;">
                    <button mat-icon-button color='warn' (click)="deleteUserGame(userGame._id)">
                        <mat-icon inline=true>delete</mat-icon>
                    </button>
                </td>
            </ng-container>
    
            <tr mat-header-row *matHeaderRowDef="userGameColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: userGameColumns;"></tr>
        </table>
    </div>

    <div class='user-game-item'>
        <form [formGroup]="userGameForm" (ngSubmit)="onSubmit()">
            <input type="hidden" formControlName="user_id" [ngModel]="user!._id">
        
            <div class="form-group">
                <label for="game">Game:</label>
                <div class='games-container'>
                    <div class='radio-wrapper' *ngFor="let item of games">
                        <label for='{{item}}_radio'>
                            <input mat-radio-button id="{{item}}_radio" [value]='item' type="radio" formControlName="game">
                            <img class='game_icon' src="/assets/images/{{item}}.png" alt="{{item}} icon">
                        </label>
                    </div>
                </div>
            </div>
        
            <div class="form-group">
                <mat-form-field appearance="outline">
                    <mat-label>Platform:</mat-label>
                    <mat-select class="form-control" id="platforms" required formControlName="platform">
                        <mat-option value="" selected>Please select a platform</mat-option>
                        <mat-option *ngFor="let platform of platforms" [value]="platform">{{platform}}</mat-option>
                    </mat-select>
                </mat-form-field>
                
                <div class='button-container'>
                    <button mat-raised-button type="button" color="primary" (click)='back()'>Back</button>
                    <button mat-raised-button type="submit" color="primary">Add Platform</button>
                </div>
            </div>

            <div *ngIf="f['game'].touched && f['game'].invalid" class="alert alert-danger">
                <small *ngIf="f['game'].errors?.['required']">You must select a game.</small>
            </div>
            <div *ngIf="f['platform'].touched && f['platform'].invalid" class="alert alert-danger">
                <small *ngIf="f['platform'].errors?.['required']">You must select a platform.</small>
            </div>           

        </form>
    </div>     
</div>

